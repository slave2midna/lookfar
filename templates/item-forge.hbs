{{!-- modules/lookfar/templates/item-forge.hbs --}}

<div id="if-body">
  <form>
    <div class="lf-if-layout">

      {{!-- Left Column: Item selection, attributes, preview --}}
      <div class="lf-if-col-left">

        {{!-- Choose Item --}}
        <fieldset class="lf-if-fieldset">
          <legend>Choose Item</legend>
          <div class="lf-if-choose-item">
            <div class="lf-if-item-types">
              <label>
                <input type="radio" name="itemType" value="weapon" checked>
                Weapon
              </label><br>
              <label>
                <input type="radio" name="itemType" value="armor">
                Armor
              </label><br>
              <label>
                <input type="radio" name="itemType" value="shield">
                Shield
              </label><br>
              <label>
                <input type="radio" name="itemType" value="accessory">
                Accessory
              </label>
            </div>

            <div class="lf-if-template-wrapper">
              <div id="templateList" class="lf-if-scroll lf-if-template-list" aria-label="Template list">
                <div>Loadingâ€¦</div>
              </div>
            </div>
          </div>
        </fieldset>

        {{!-- Attributes --}}
        <div id="attrRow" class="lf-if-attr-row">
          <fieldset class="lf-if-fieldset">
            <legend>Attributes</legend>

            <div id="attrInner" class="lf-if-attr-inner">

              {{!-- Always present, JS will show/hide --}}
              <label>Attr A:
                <select id="optAttrA" style="max-width:160px;">
                  <option value="MIG">MIG</option>
                  <option value="DEX">DEX</option>
                  <option value="INS">INS</option>
                  <option value="WLP">WLP</option>
                </select>
              </label>

              <label>Attr B:
                <select id="optAttrB" style="max-width:160px;">
                  <option value="MIG">MIG</option>
                  <option value="DEX">DEX</option>
                  <option value="INS">INS</option>
                  <option value="WLP">WLP</option>
                </select>
              </label>

            </div>
          </fieldset>
        </div>

        {{!-- Preview --}}
        <fieldset class="lf-if-fieldset">
          <legend>Preview</legend>
          <div id="itemPreviewLarge" class="lf-if-preview">
            CONTENT
          </div>
        </fieldset>

      </div>

      {{!-- Right Column: Customize, qualities, cost --}}
      <div class="lf-if-col-right">

        {{!-- Customize --}}
        <fieldset class="lf-if-fieldset">
          <legend>Customize</legend>

          <div id="customizeArea" class="lf-if-customize">

            {{!-- Weapon-only customize options --}}
            <div id="weaponCustomize" style="display:flex; flex-direction:column; gap:4px;">

              <label>
                <input type="checkbox" id="optPlusOne">
                <span>+1 Accuracy</span>
              </label>

              <label>
                <input type="checkbox" id="optPlusDamage">
                <span>+4 Damage</span>
              </label>

              <label id="handToggleWrap" style="display:none;">
                <input type="checkbox" id="optToggleHand">
                <span id="handToggleLabel"></span>
              </label>

              <label>Type:
                <select id="optElement" style="max-width:160px;">
                  <option value="physical" selected>Physical</option>
                  <option value="fire">Fire</option>
                  <option value="ice">Ice</option>
                  <option value="earth">Earth</option>
                  <option value="air">Air</option>
                  <option value="bolt">Bolt</option>
                  <option value="dark">Dark</option>
                  <option value="light">Light</option>
                  <option value="poison">Poison</option>
                </select>
              </label>

            </div>

            {{!-- Non-weapon fallback --}}
            <div id="noCustomize" style="opacity:0.8; display:none;">
              No Options
            </div>

          </div>
        </fieldset>

        {{!-- Qualities --}}
        <fieldset class="lf-if-fieldset">
          <legend>Qualities</legend>

          <div class="lf-if-qualities-select">
            <select id="qualitiesCategory" style="width: 100%;">
              <option value="none" selected>None</option>
              <option value="basic">Basic</option>
              <option value="custom">Custom</option>
              <option value="ardent">Ardent</option>
              <option value="aerial">Aerial</option>
              <option value="thunderous">Thunderous</option>
              <option value="paradox">Paradox</option>
              <option value="terrestrial">Terrestrial</option>
              <option value="glacial">Glacial</option>
              <option value="spiritual">Spiritual</option>
              <option value="corrupted">Corrupted</option>
              <option value="aquatic">Aquatic</option>
              <option value="mechanical">Mechanical</option>
            </select>
          </div>

          <div id="qualitiesList" class="lf-if-scroll lf-if-qualities-list" aria-label="Qualities list">

            {{!-- STANDARD QUALITY LIST --}}
            <div id="qualitiesStandardBlock"></div>

            {{!-- CUSTOM QUALITY BLOCK --}}
            <div id="qualitiesCustomBlock" style="display:none; padding:6px;">

              <textarea id="customEffect"
                rows="2"
                wrap="soft"
                style="width:100%; height:44px; box-sizing:border-box; resize:none; overflow-y:auto;"
                title="Type your custom effect text">
              </textarea>

              <div style="display:flex; align-items:center; gap:8px; margin-top:6px;">
                <label for="customCost"
                       style="font-size:12px; opacity:0.8; line-height:1; white-space:nowrap;">
                  Cost:
                </label>
                <input id="customCost"
                       type="number"
                       min="0"
                       step="1"
                       inputmode="numeric"
                       pattern="\\d*"
                       value="0"
                       style="width:100%; height:25px; box-sizing:border-box;"
                       title="Enter a non-negative integer">
              </div>

              <button type="button" id="customApply"
                style="width:auto; height:28px; margin:4px auto 0; padding:0 10px;">
                Apply
              </button>

            </div>

          </div>
        </fieldset>

        {{!-- Cost --}}
        <fieldset class="lf-if-fieldset">
          <legend>Cost</legend>
          <div id="costRow" class="lf-if-cost-row">
            <i class="fuk fu-zenit" aria-hidden="true"></i>
            <span id="costValue" class="lf-if-cost-value">0</span>
            <label class="lf-if-cost-fee">
              <input type="checkbox" id="optFee">
              <span>No Fee</span>
            </label>
          </div>
        </fieldset>

      </div>

    </div>

    {{!-- Materials --}}
    <fieldset class="lf-if-fieldset lf-if-materials-fieldset">
      <legend>Materials</legend>
      <div id="materialsDrop" class="lf-if-materials-drop" aria-label="Materials drop zone">
        <div id="materialsHint" class="lf-if-materials-hint">
          Drag & drop Item documents here (max 5)
        </div>
      </div>
    </fieldset>

  </form>
</div>
