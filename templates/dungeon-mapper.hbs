{{!-- modules/lookfar/templates/dungeon-mapper.hbs --}}

<div class="lf-dm-root">

  <div id="dungeon-builder-wrapper" class="lf-dm-wrapper">
  <canvas
    id="dungeon-builder-canvas"
    width="360"
    height="360"
    class="lf-dm-canvas"
  >
  </canvas>

  <div
    id="dungeon-builder-icons"
    class="lf-dm-icons"
  ></div>

  {{!-- Compass Overlay (bottom-left) --}}
  <div class="lf-dm-compass">
    <i class="fa-solid fa-compass lf-dm-compass-icon"></i>
    <i class="fa-solid fa-location-arrow lf-dm-compass-north"></i>
    <span class="lf-dm-compass-n">N</span>
  </div>
</div>

  <div class="lf-dm-panel">

    {{!-- Top row: Paths / Points / Seed --}}
    <div class="lf-dm-row lf-dm-row--top">

      {{!-- Paths --}}
      <fieldset class="lf-dm-fieldset lf-dm-fieldset--paths">
        <legend class="lf-dm-legend">Paths</legend>
        <div class="lf-dm-group lf-dm-group--paths">

          {{!-- Open paths --}}
          <div class="lf-dm-path-row">
            <input
              type="number"
              id="dungeon-builder-path-open-count"
              value="3"
              min="0"
              max="8"
              class="lf-dm-input lf-dm-input--small"
            >
            <span class="lf-dm-line lf-dm-line--open"></span>
            <span class="lf-dm-label lf-dm-label--inline">Open</span>
          </div>

          {{!-- Closed paths --}}
          <div class="lf-dm-path-row">
            <input
              type="number"
              id="dungeon-builder-path-closed-count"
              value="2"
              min="0"
              max="3"
              class="lf-dm-input lf-dm-input--small"
            >
            <span class="lf-dm-line-wrapper lf-dm-line-wrapper--closed">
              <span class="lf-dm-line lf-dm-line--closed">
                <span class="lf-dm-line-block"></span>
              </span>
            </span>
            <span class="lf-dm-label lf-dm-label--inline">Closed</span>
          </div>

          {{!-- Secret paths --}}
          <div class="lf-dm-path-row">
            <input
              type="number"
              id="dungeon-builder-path-secret-count"
              value="1"
              min="0"
              max="3"
              class="lf-dm-input lf-dm-input--small"
            >
            <span class="lf-dm-line lf-dm-line--secret"></span>
            <span class="lf-dm-label lf-dm-label--inline">Secret</span>
          </div>
        </div>
      </fieldset>

      {{!-- Points --}}
      <fieldset class="lf-dm-fieldset lf-dm-fieldset--points">
        <legend class="lf-dm-legend">Points</legend>
        <div class="lf-dm-group lf-dm-group--points">

          {{!-- Features --}}
          <div class="lf-dm-point-row">
            <input
              type="number"
              id="dungeon-builder-point-feature-count"
              value="3"
              min="0"
              max="3"
              class="lf-dm-input lf-dm-input--small"
            >
            <i class="fa-sharp fa-solid fa-circle lf-dm-point-icon"></i>
            <span class="lf-dm-label lf-dm-label--inline">&nbsp;Feature</span>
          </div>

          {{!-- Dangers --}}
          <div class="lf-dm-point-row">
            <input
              type="number"
              id="dungeon-builder-point-danger-count"
              value="2"
              min="0"
              max="3"
              class="lf-dm-input lf-dm-input--small"
            >
            <i class="fa-sharp fa-solid fa-triangle lf-dm-point-icon"></i>
            <span class="lf-dm-label lf-dm-label--inline">&nbsp;Danger</span>
          </div>

          {{!-- Treasures --}}
          <div class="lf-dm-point-row">
            <input
              type="number"
              id="dungeon-builder-point-treasure-count"
              value="1"
              min="0"
              max="3"
              class="lf-dm-input lf-dm-input--small"
            >
            <i class="fa-sharp fa-solid fa-diamond lf-dm-point-icon"></i>
            <span class="lf-dm-label lf-dm-label--inline">&nbsp;Treasure</span>
          </div>
        </div>
      </fieldset>

      {{!-- Seed --}}
      <fieldset class="lf-dm-fieldset lf-dm-fieldset--seed">
        <legend class="lf-dm-legend">Seed</legend>
        <div class="lf-dm-group lf-dm-group--seed">

  <div class="lf-dm-seed-display">
    <div id="dungeon-builder-seed-current" class="lf-dm-seed-current">â€”</div>

    <button
      type="button"
      id="dungeon-builder-seed-copy"
      class="lf-dm-button lf-dm-button--icon"
      title="Copy seed"
    >
      <i class="fa-solid fa-copy lf-dm-icon lf-dm-icon--tiny"></i>
    </button>
  </div>

  <div class="lf-dm-seed-input-wrap">
    <input
      type="text"
      id="dungeon-builder-seed-input"
      placeholder="Enter seed"
      class="lf-dm-input lf-dm-input--seed"
    >
  </div>

  <!-- New Apply Button -->
  <div class="lf-dm-seed-apply-wrap">
    <button
      type="button"
      id="dungeon-builder-seed-apply"
      class="lf-dm-button lf-dm-button--secondary"
    >
      Apply
    </button>
  </div>

</div>
      </fieldset>

    </div>{{!-- /.lf-dm-row--top --}}

    {{!-- Middle row: Generate / Shape --}}
    <div class="lf-dm-row lf-dm-row--middle">

      {{!-- Generate --}}
      <fieldset class="lf-dm-fieldset lf-dm-fieldset--generate">
        <legend class="lf-dm-legend">Generate</legend>
        <div class="lf-dm-generate-options">
          <button
            type="button"
            id="dungeon-builder-opt-keys"
            class="lf-dm-button lf-dm-button--toggle"
            title="Keys"
          >
            <i class="fa-solid fa-key lf-dm-icon"></i>
          </button>

          <button
            type="button"
            id="dungeon-builder-opt-patrols"
            class="lf-dm-button lf-dm-button--toggle"
            title="Patrols"
          >
            <i class="fa-solid fa-skull lf-dm-icon"></i>
          </button>

          <button
            type="button"
            id="dungeon-builder-opt-traps"
            class="lf-dm-button lf-dm-button--toggle"
            title="Traps"
          >
            <i class="fa-solid fa-land-mine-on lf-dm-icon"></i>
          </button>
        </div>
      </fieldset>

      {{!-- Shape --}}
      <fieldset class="lf-dm-fieldset lf-dm-fieldset--shape">
        <legend class="lf-dm-legend">Shape</legend>
        <div class="lf-dm-shape-options">

          <button
            type="button"
            id="dungeon-builder-shape-pent"
            class="lf-dm-button lf-dm-button--toggle"
            title="Pentagon"
          >
            <span
              class="lf-dm-icon lf-dm-icon--shape lf-dm-shape-icon"
              data-shape="pentagon"
            ></span>
          </button>

          <button
            type="button"
            id="dungeon-builder-shape-hex"
            class="lf-dm-button lf-dm-button--toggle"
            title="Hexagon"
          >
            <span
              class="lf-dm-icon lf-dm-icon--shape lf-dm-shape-icon"
              data-shape="hexagon"
            ></span>
          </button>

          <button
            type="button"
            id="dungeon-builder-shape-sept"
            class="lf-dm-button lf-dm-button--toggle"
            title="Heptagon"
          >
            <span
              class="lf-dm-icon lf-dm-icon--shape lf-dm-shape-icon"
              data-shape="heptagon"
            ></span>
          </button>

          <button
            type="button"
            id="dungeon-builder-shape-oct"
            class="lf-dm-button lf-dm-button--toggle"
            title="Octagon"
          >
            <span
              class="lf-dm-icon lf-dm-icon--shape lf-dm-shape-icon"
              data-shape="octagon"
            ></span>
          </button>
        </div>
      </fieldset>

    </div>{{!-- /.lf-dm-row--middle --}}

    {{!-- Bottom row: Generate / Save buttons --}}
    <div class="lf-dm-row lf-dm-row--buttons">
      <button
        type="button"
        id="dungeon-builder-generate-btn"
        class="lf-dm-button lf-dm-button--primary"
      >
        Generate
      </button>

      <button
        type="button"
        id="dungeon-builder-save-btn"
        class="lf-dm-button lf-dm-button--secondary"
      >
        Save
      </button>
    </div>

  </div>{{!-- /.lf-dm-panel --}}

</div>{{!-- /.lf-dm-root --}}
